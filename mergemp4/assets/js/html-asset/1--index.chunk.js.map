{"version":3,"file":"assets/js/html-asset/1--index.chunk.js","sources":["webpack:///./src/index.js"],"sourcesContent":["const { createWorker } = require('@ffmpeg/ffmpeg')\n\nconst readFile = async file =>\n\tnew Uint8Array(await new Response(file).arrayBuffer())\n\nconst download = (url, name = 'file') => {\n\tconst a = document.createElement('a')\n\ta.href = url\n\ta.download = name\n\tdocument.body.appendChild(a)\n\ta.click()\n\tdocument.body.removeChild(a)\n}\n\nconst $ = s => document.querySelector(s)\nconst $video = $('.video')\n$video.addEventListener('drop', e => {\n\te.preventDefault()\n\t$('#video').files = e.dataTransfer.files\n})\n$video.addEventListener('dragover', e => {\n\te.preventDefault()\n})\nconst $audio = $('.audio')\n$audio.addEventListener('drop', e => {\n\te.preventDefault()\n\t$('#audio').files = e.dataTransfer.files\n})\n$audio.addEventListener('dragover', e => {\n\te.preventDefault()\n})\n\nconst worker = createWorker({\n\tlogger: m => {\n\t\tif (m.type === 'stderr') {\n\t\t\tstderr.textContent += m.message + '\\n'\n\t\t}\n\t}\n})\nworker.load().then(() => console.log('load done'))\nconst ext = name => name.split('.').pop()\nconst $form = $('.form')\n$form.addEventListener('submit', async e => {\n\te.preventDefault()\n\tconst video = $('#video').files[0]\n\tconst audio = $('#audio').files[0]\n\tif (!video || !audio) {\n\t\talert('Either video or audio does not exist.')\n\t\treturn\n\t}\n\tconst vidName = 'video.' + ext(video.name)\n\tconst audName = 'audio.' + ext(audio.name)\n\tconst outExt = ext(video.name)\n\tawait worker.write(vidName, await readFile(video))\n\tawait worker.write(audName, await readFile(audio))\n\tawait worker.run(`-i ${vidName} -i ${audName} -c copy output.${outExt}`, {\n\t\tinput: [vidName, audName],\n\t\toutput: 'output.' + outExt\n\t})\n\tconst { data } = await worker.read('output.' + outExt)\n\tawait worker.remove('output.' + outExt)\n\tconst url = URL.createObjectURL(new Blob([data]))\n\tdownload(url, $('.form>input[name=filename]').value)\n})\n"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AACA;AAIA;AALA;AACA;AADA;AAQA;AACA;AACA;AAVA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAcA;AACA;AAFA;AACA;AAdA;AAAA;AAAA;AACA;AADA;AAAA;AAiBA;AAjBA;AAAA;AACA;AADA;AAmBA;AACA;AACA;AArBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;;;;A","sourceRoot":""}